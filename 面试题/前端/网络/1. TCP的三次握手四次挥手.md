## 三次握手

TCP 的三次握手是建立 TCP 连接的重要过程，它确保客户端和服务器双方都具备发送和接收数据的能力，同时初始化序列号。以下是三次握手的详细步骤：

### 第一次握手：客户端向服务器发送 SYN 包
- 客户端主动发起连接请求，创建一个 TCP 报文段，将报文中的 SYN 标志位置为 1，表示这是一个连接请求。
- 同时，客户端会随机选择一个初始序列号（ISN），并将其放在序列号字段中发送给服务器。

### 第二次握手：服务器向客户端发送 SYN + ACK 包
- 服务器接收到客户端的 SYN 包后，知道客户端有建立连接的意愿。
- 服务器会创建一个新的 TCP 报文段，将 SYN 和 ACK 标志位都置为 1。其中，SYN 为 1 表示服务器同意建立连接，ACK 为 1 表示对客户端 SYN 包的确认。
- 服务器也会随机选择一个自己的初始序列号，并将客户端的初始序列号加 1 后放在确认号字段中，发送给客户端。

### 第三次握手：客户端向服务器发送 ACK 包
- 客户端收到服务器的 SYN + ACK 包后，确认服务器已经同意建立连接。
- 客户端创建一个 TCP 报文段，将 ACK 标志位置为 1，表示对服务器 SYN 包的确认。
- 客户端将服务器的初始序列号加 1 后放在确认号字段中，发送给服务器。

经过这三次握手，客户端和服务器之间就建立了可靠的 TCP 连接，可以开始进行数据传输了。三次握手的主要作用是同步双方的初始序列号，确保双方都有发送和接收数据的能力，并且让双方都知道对方已经做好了数据传输的准备。 


## 四次挥手

好的，TCP的四次挥手是用于正常关闭连接的过程，确保双方都能完成数据传输并安全断开连接。具体步骤如下：

1. **第一次挥手**：客户端（或服务器）发送一个FIN（结束）报文，表示自己没有数据要发送了，请求关闭连接。

2. **第二次挥手**：服务器收到FIN报文后，发送一个ACK报文，确认收到关闭请求。此时，客户端到服务器的连接关闭，但服务器仍可以发送数据。

3. **第三次挥手**：当服务器完成数据发送后，发送一个FIN报文，表示自己也没有数据要发送了，请求关闭连接。

4. **第四次挥手**：客户端收到FIN报文后，发送一个ACK报文，确认收到关闭请求。服务器收到ACK后，连接完全关闭。

四次挥手确保了双方都能安全关闭连接，避免数据丢失或连接异常。